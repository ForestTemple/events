{% extends "layout.html" %}
{% block css %}
	<link rel="stylesheet" href="{{url_for('static', filename='css/view.css')}}">
	 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
	integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
	crossorigin=""></script>
{% endblock %}
{% block content %}
<main>
	<section>
		<header>
			<h2>{{ event.name }}</h2>
		</header>

		<div class="top">
		<div class="left">
		<ul>
			<li>{{ event.location_name }}</li>
			<li>{{ event.description }}</li>
			<li>{{ event.datestamp }}</li>
			<li>{{ event.email }}</li>
			<li>{{ event.phone }}</li>
		</ul>
		</div>

		<div class="right">
			<div id="mymap"></div>
		</div>
		</div>

		<div class="bottom"> 
			<h2>Comments</h2>
			{% for comment in event.comments %}
			<div class="comment">
				<ul>
					<li>{{ comment.email }} {{ comment.rating }}</li>
					<li>{{ comment.text }}</li>
					<li>{{ comment.datestamp }}</li>
				</ul>
			</div>
			{% endfor %}
		</div>
	</section>

	<script>
		var mymap = L.map('mymap').setView({{ event.location }}, 13);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
				'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(mymap);
		var marker = L.marker({{event.location}}).addTo(mymap);
		marker.bindPopup("<strong>{{event.location_name}}</strong><p>{{event.name}}</p>").openPopup();
	</script>
</main>
{% endblock %}
